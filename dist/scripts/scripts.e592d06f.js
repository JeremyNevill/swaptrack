"use strict";angular.module("badgerApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","firebase"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/csv",{templateUrl:"views/csv.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("badgerApp").controller("MainCtrl",["$scope","$firebase",function(a,b){var c=new Firebase("https://badger.firebaseio.com");a.userId="",a.isLoggedIn=!1;var d="https://badger.firebaseio.com/users/"+a.userId,e="",f=new Firebase(d),g=new Firebase(d+"/missings"),h=new Firebase(d+"/swaps");a.user=[],a.userMissings=[],a.userSwaps=[],a.otherSwaps=[],a.matches=[];var i=new FirebaseSimpleLogin(c,function(c,e){c?console.log(c):e&&(console.log("User ID: "+e.uid+", Provider: "+e.provider),a.userId=e.uid,d="https://badger.firebaseio.com/users/"+a.userId,f=new Firebase(d),g=new Firebase(d+"/missings"),h=new Firebase(d+"/swaps"),a.user=b(f),a.userMissings=b(g),a.userSwaps=b(h),a.userDisplayName=e.displayName,a.isLoggedIn=!0)});a.FacebookLogin=function(){i.login("facebook",{rememberMe:!0})},a.Logout=function(){i.logout(),a.userId=""},a.addMissing=function(){var b=a.newMissing.split(",");for(var c in b)b[c].length>0&&a.userMissings.$add(parseInt(b[c],10));a.newMissing="",a.matchSwaps()},a.deleteMissing=function(b){a.userMissings.$remove(b)},a.clearMissings=function(){a.userMissings.$remove()},a.getOtherData=function(){e=c+"/users/"+a.otherUserId+"/swaps";var d=new Firebase(e);a.otherSwaps=b(d)},a.matchSwaps=function(){a.matches=[],a.userMissings.$getIndex().forEach(function(b){a.otherSwaps.$getIndex().forEach(function(c){if(a.userMissings[b]===a.otherSwaps[c]){var d=a.otherSwaps[c];a.matches.indexOf(d)>-1||a.matches.push(d)}})})},a.addSwap=function(){var b=a.newSwap.split(",");for(var c in b)b[c].length>0&&a.userSwaps.$add(parseInt(b[c],10));a.newSwap=""},a.deleteSwap=function(b){a.userSwaps.$remove(b),a.matchSwaps()},a.clearSwaps=function(){a.userSwaps.$remove()}}]),angular.module("badgerApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]);